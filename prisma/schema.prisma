generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

// â”€â”€â”€ Example Model â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String?
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("users")
}

// â”€â”€â”€ Region â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

model Region {
  id        String    @id @default(cuid())
  name      String
  slug      String    @unique
  code      String    @unique   // e.g. "AF", "EU", "AS", "NA", "SA", "OC", "AN"
  flag      String              // image URL or emoji
  countries Country[]
  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime  @updatedAt @map("updated_at")

  @@map("regions")
}

// â”€â”€â”€ Country â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

model Country {
  id        String   @id @default(cuid())
  name      String
  slug      String   @unique
  code      String   @unique   // ISO 3166-1 alpha-2 (e.g. "US", "PK")
  flag      String             // emoji flag (e.g. "ðŸ‡ºðŸ‡¸") or URL
  regionId  String?  @map("region_id")
  region    Region?  @relation(fields: [regionId], references: [id])
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("countries")
}

// â”€â”€â”€ Provider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

model Provider {
  id         String   @id @default(cuid())
  name       String
  slug       String   @unique
  info       String?              // provider description
  image      String?              // logo URL
  certified  Boolean  @default(false)
  popularity Int      @default(0)
  planCount  Int      @default(0) @map("plan_count")
  plans      Plan[]
  createdAt  DateTime @default(now()) @map("created_at")
  updatedAt  DateTime @updatedAt @map("updated_at")

  @@map("providers")
}

// â”€â”€â”€ Plan â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

model Plan {
  id                 String   @id @default(cuid())
  name               String
  slug               String   @unique

  // â”€â”€ Pricing â”€â”€
  usdPrice           Float    @default(0) @map("usd_price")
  prices             Json     @default("{}")         // { "USD": 0, "EUR": 5.99 }
  priceInfo          String?  @map("price_info")

  // â”€â”€ Data & Validity â”€â”€
  capacity           Int                              // data in MB
  capacityInfo       String?  @map("capacity_info")
  period             Int                              // validity in days
  validityInfo       String?  @map("validity_info")

  // â”€â”€ Speed â”€â”€
  speedLimit         Int?     @map("speed_limit")
  reducedSpeed       Int?     @map("reduced_speed")
  possibleThrottling Boolean  @default(false) @map("possible_throttling")
  isLowLatency       Boolean  @default(false) @map("is_low_latency")

  // â”€â”€ Features â”€â”€
  has5G              Boolean  @default(false) @map("has_5g")
  tethering          Boolean  @default(false)
  canTopUp           Boolean  @default(false) @map("can_top_up")
  phoneNumber        Boolean  @default(false) @map("phone_number")
  subscription       Boolean  @default(false)
  subscriptionPeriod Int?     @map("subscription_period")
  payAsYouGo         Boolean  @default(false) @map("pay_as_you_go")
  newUserOnly        Boolean  @default(false) @map("new_user_only")
  isConsecutive      Boolean  @default(false) @map("is_consecutive")
  eKYC               Boolean? @map("e_kyc")

  // â”€â”€ Complex / Nested (JSON) â”€â”€
  telephony          Json?                            // { dialingCode, voice, sms }
  coverages          Json     @default("[]")          // [{ name, code, networks }]
  internetBreakouts  Json     @default("[]") @map("internet_breakouts") // [{ country }]

  // â”€â”€ Meta â”€â”€
  additionalInfo     String?  @map("additional_info")
  providerId         String   @map("provider_id")
  provider           Provider @relation(fields: [providerId], references: [id])
  createdAt          DateTime @default(now()) @map("created_at")
  updatedAt          DateTime @updatedAt @map("updated_at")

  @@map("plans")
}
